var e;e||(e=typeof Module !== 'undefined' ? Module : {});e.file=e.file||function(a=256){let b=0,c=0,d=new Uint8Array(a);return{contents:function(){return d.slice(0,c)},seek:function(f){b=f},write:function(f){const g=f.byteLength;var h=b+g,k=d.length;k>=h||(h=Math.max(h,k*(1048576>k?2:1.125)>>>0),0!=k&&(h=Math.max(h,256)),k=d,d=new Uint8Array(h),0<c&&d.set(k.subarray(0,c),0));d.set(f,b);b+=g;c=Math.max(c,b);return g}}};e.create_buffer=function(a){return e._malloc(a)};e.free_buffer=function(a){return e._free(a)};
e.create=function(a={}){function b(){null!=k||m||(k=e.create_buffer(d*f*3/2));return k}function c(){null!=l||m||(l=e.create_buffer(d*f*g));return l}const d=a.width,f=a.height,g=a.stride||4;if(!d||!f)throw Error("width and height must be > 0");const h=e.file();let k=null,l=null,m=!1;a=Object.assign({},a);delete a.stride;const q=e.create_encoder(a,function(n,r,t){h.seek(t);n=e.HEAPU8.subarray(n,n+r);return h.write(n)!==n.byteLength});return{memory:function(){return e.HEAPU8},getYUVPointer:b,getRGBPointer:c,
end:function(){if(m)throw Error("Attempting to end() an encoder that is already finished");m=!0;e.finalize_encoder(q);null!=k&&e.free_buffer(k);null!=l&&e.free_buffer(l);return h.contents()},encodeRGBPointer:function(){const n=c(),r=b();e.encode_rgb(q,n,g,r)},encodeYUVPointer:function(){const n=b();e.encode_yuv(q,n)},encodeRGB:function(n){if(n.length!==d*f*g)throw Error("Expected buffer to be sized (width * height * "+g+")");const r=c(),t=b();e.HEAPU8.set(n,r);e.encode_rgb(q,r,g,t)},encodeYUV:function(n){if(n.length!==
d*f*3/2)throw Error("Expected buffer to be sized (width * height * 3) / 2");const r=b();e.HEAPU8.set(n,r);e.encode_yuv(q,r)}}};e.locateFile=function(a,b){e.simd&&(a=a.replace(/\.wasm$/i,".simd.wasm"));return e.getWasmPath?e.getWasmPath(a,b,e.simd):b+a};var aa=Object.assign({},e),u="",ba,v,fs=require("fs"),ca=require("path");u=__dirname+"/";ba=a=>{a=a.startsWith("file://")?new URL(a):ca.normalize(a);return fs.readFileSync(a,void 0)};v=a=>{a=ba(a);a.buffer||(a=new Uint8Array(a));return a};
1<process.argv.length&&process.argv[1].replace(/\\/g,"/");process.argv.slice(2);"undefined"!=typeof module&&(module.exports=e);process.on("uncaughtException",function(a){throw a;});if(15>process.version.match(/^v(\d+)\./)[1])process.on("unhandledRejection",function(a){throw a;});e.inspect=function(){return"[Emscripten Module object]"};e.print||console.log.bind(console);var w=e.printErr||console.warn.bind(console);Object.assign(e,aa);aa=null;var x;e.wasmBinary&&(x=e.wasmBinary);
var noExitRuntime=e.noExitRuntime||!0;"object"!=typeof WebAssembly&&y("no native wasm support detected");var da,ea=!1;function z(a,b){var c=A;b=a+b;for(var d="";!(a>=b);){var f=c[a++];if(!f)break;if(f&128){var g=c[a++]&63;if(192==(f&224))d+=String.fromCharCode((f&31)<<6|g);else{var h=c[a++]&63;f=224==(f&240)?(f&15)<<12|g<<6|h:(f&7)<<18|g<<12|h<<6|c[a++]&63;65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else d+=String.fromCharCode(f)}return d}
var B,A,C,D,E,G,fa,ha,ia,ja=[],ka=[],la=[];function ma(){var a=e.preRun.shift();ja.unshift(a)}var H=0,I=null,J=null;function y(a){if(e.onAbort)e.onAbort(a);a="Aborted("+a+")";w(a);ea=!0;throw new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.");}var K;K="mp4-encoder.node.wasm";if(!K.startsWith("data:application/octet-stream;base64,")){var na=K;K=e.locateFile?e.locateFile(na,u):u+na}
function oa(){return Promise.resolve().then(function(){a:{var a=K;try{if(a==K&&x){var b=new Uint8Array(x);break a}if(v){b=v(a);break a}throw"both async and sync fetching of the wasm failed";}catch(c){y(c)}b=void 0}return b})}function M(a){for(;0<a.length;)a.shift()(e)}function pa(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a);}}var qa=void 0;function N(a){for(var b="";A[a];)b+=qa[A[a++]];return b}var O={},P={},Q={};
function ra(a){if(void 0===a)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var b=a.charCodeAt(0);return 48<=b&&57>=b?"_"+a:a}function sa(a,b){a=ra(a);return(new Function("body","return function "+a+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n'))(b)}
function ta(a){var b=Error,c=sa(a,function(d){this.name=a;this.message=d;d=Error(d).stack;void 0!==d&&(this.stack=this.toString()+"\n"+d.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message};return c}var ua=void 0;function R(a){throw new ua(a);}var va=void 0;
function wa(a,b){function c(k){k=b(k);if(k.length!==d.length)throw new va("Mismatched type converter count");for(var l=0;l<d.length;++l)S(d[l],k[l])}var d=[];d.forEach(function(k){Q[k]=a});var f=Array(a.length),g=[],h=0;a.forEach((k,l)=>{P.hasOwnProperty(k)?f[l]=P[k]:(g.push(k),O.hasOwnProperty(k)||(O[k]=[]),O[k].push(()=>{f[l]=P[k];++h;h===g.length&&c(f)}))});0===g.length&&c(f)}
function S(a,b,c={}){if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var d=b.name;a||R('type "'+d+'" must have a positive integer typeid pointer');if(P.hasOwnProperty(a)){if(c.J)return;R("Cannot register type '"+d+"' twice")}P[a]=b;delete Q[a];O.hasOwnProperty(a)&&(b=O[a],delete O[a],b.forEach(f=>f()))}var xa=[],T=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ya(a){4<a&&0===--T[a].H&&(T[a]=void 0,xa.push(a))}
var U=a=>{a||R("Cannot use deleted val. handle = "+a);return T[a].value},V=a=>{switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=xa.length?xa.pop():T.length;T[b]={H:1,value:a};return b}};function za(a){return this.fromWireType(E[a>>2])}function Aa(a,b){switch(b){case 2:return function(c){return this.fromWireType(fa[c>>2])};case 3:return function(c){return this.fromWireType(ha[c>>3])};default:throw new TypeError("Unknown float type: "+a);}}
function Ba(a){var b=Function;if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var c=sa(b.name||"unknownFunctionName",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}function Ca(a){for(;a.length;){var b=a.pop();a.pop()(b)}}
function Da(a,b){var c=e;if(void 0===c[a].F){var d=c[a];c[a]=function(){c[a].F.hasOwnProperty(arguments.length)||R("Function '"+b+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+c[a].F+")!");return c[a].F[arguments.length].apply(this,arguments)};c[a].F=[];c[a].F[d.I]=d}}
function Ga(a,b,c){e.hasOwnProperty(a)?((void 0===c||void 0!==e[a].F&&void 0!==e[a].F[c])&&R("Cannot register public name '"+a+"' twice"),Da(a,a),e.hasOwnProperty(c)&&R("Cannot register multiple overloads of a function with the same number of arguments ("+c+")!"),e[a].F[c]=b):(e[a]=b,void 0!==c&&(e[a].L=c))}function Ha(a,b){for(var c=[],d=0;d<a;d++)c.push(G[b+4*d>>2]);return c}var W=[];function Ia(a){var b=W[a];b||(a>=W.length&&(W.length=a+1),W[a]=b=ia.get(a));return b}
function Ja(a,b){var c=[];return function(){c.length=0;Object.assign(c,arguments);if(a.includes("j")){var d=e["dynCall_"+a];d=c&&c.length?d.apply(null,[b].concat(c)):d.call(null,b)}else d=Ia(b).apply(null,c);return d}}function Ka(a,b){a=N(a);var c=a.includes("j")?Ja(a,b):Ia(b);"function"!=typeof c&&R("unknown function pointer with signature "+a+": "+b);return c}var La=void 0;function Ma(a){a=Na(a);var b=N(a);X(a);return b}
function Oa(a,b){function c(g){f[g]||P[g]||(Q[g]?Q[g].forEach(c):(d.push(g),f[g]=!0))}var d=[],f={};b.forEach(c);throw new La(a+": "+d.map(Ma).join([", "]));}function Pa(a,b,c){switch(b){case 0:return c?function(d){return B[d]}:function(d){return A[d]};case 1:return c?function(d){return C[d>>1]}:function(d){return D[d>>1]};case 2:return c?function(d){return E[d>>2]}:function(d){return G[d>>2]};default:throw new TypeError("Unknown integer type: "+a);}}
function Qa(a,b){for(var c="",d=0;!(d>=b/2);++d){var f=C[a+2*d>>1];if(0==f)break;c+=String.fromCharCode(f)}return c}function Ra(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var f=0;f<c;++f)C[b>>1]=a.charCodeAt(f),b+=2;C[b>>1]=0;return b-d}function Sa(a){return 2*a.length}
function Ta(a,b){for(var c=0,d="";!(c>=b/4);){var f=E[a+4*c>>2];if(0==f)break;++c;65536<=f?(f-=65536,d+=String.fromCharCode(55296|f>>10,56320|f&1023)):d+=String.fromCharCode(f)}return d}function Ua(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var d=b;c=d+c-4;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(55296<=g&&57343>=g){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}E[b>>2]=g;b+=4;if(b+4>c)break}E[b>>2]=0;return b-d}
function Va(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c;b+=4}return b}function Wa(a,b){var c=P[a];void 0===c&&R(b+" has unknown type "+Ma(a));return c}for(var Xa={},Ya=Array(256),Y=0;256>Y;++Y)Ya[Y]=String.fromCharCode(Y);qa=Ya;ua=e.BindingError=ta("BindingError");va=e.InternalError=ta("InternalError");e.count_emval_handles=function(){for(var a=0,b=5;b<T.length;++b)void 0!==T[b]&&++a;return a};
e.get_first_emval=function(){for(var a=5;a<T.length;++a)if(void 0!==T[a])return T[a];return null};La=e.UnboundTypeError=ta("UnboundTypeError");
var $a={a:function(a,b,c,d){y("Assertion failed: "+(a?z(a):"")+", at: "+[b?b?z(b):"":"unknown filename",c,d?d?z(d):"":"unknown function"])},q:function(){},u:function(a,b,c,d,f){var g=pa(c);b=N(b);S(a,{name:b,fromWireType:function(h){return!!h},toWireType:function(h,k){return k?d:f},argPackAdvance:8,readValueFromPointer:function(h){if(1===c)var k=B;else if(2===c)k=C;else if(4===c)k=E;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(k[h>>g])},G:null})},t:function(a,
b){b=N(b);S(a,{name:b,fromWireType:function(c){var d=U(c);ya(c);return d},toWireType:function(c,d){return V(d)},argPackAdvance:8,readValueFromPointer:za,G:null})},p:function(a,b,c){c=pa(c);b=N(b);S(a,{name:b,fromWireType:function(d){return d},toWireType:function(d,f){return f},argPackAdvance:8,readValueFromPointer:Aa(b,c),G:null})},k:function(a,b,c,d,f,g){var h=Ha(b,c);a=N(a);f=Ka(d,f);Ga(a,function(){Oa("Cannot call "+a+" due to unbound types",h)},b-1);wa(h,function(k){var l=[k[0],null].concat(k.slice(1)),
m=k=a,q=f,n=l.length;2>n&&R("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var r=null!==l[1]&&!1,t=!1,p=1;p<l.length;++p)if(null!==l[p]&&void 0===l[p].G){t=!0;break}var Ea="void"!==l[0].name,F="",L="";for(p=0;p<n-2;++p)F+=(0!==p?", ":"")+"arg"+p,L+=(0!==p?", ":"")+"arg"+p+"Wired";m="return function "+ra(m)+"("+F+") {\nif (arguments.length !== "+(n-2)+") {\nthrowBindingError('function "+m+" called with ' + arguments.length + ' arguments, expected "+(n-2)+" args!');\n}\n";
t&&(m+="var destructors = [];\n");var Fa=t?"destructors":"null";F="throwBindingError invoker fn runDestructors retType classParam".split(" ");q=[R,q,g,Ca,l[0],l[1]];r&&(m+="var thisWired = classParam.toWireType("+Fa+", this);\n");for(p=0;p<n-2;++p)m+="var arg"+p+"Wired = argType"+p+".toWireType("+Fa+", arg"+p+"); // "+l[p+2].name+"\n",F.push("argType"+p),q.push(l[p+2]);r&&(L="thisWired"+(0<L.length?", ":"")+L);m+=(Ea?"var rv = ":"")+"invoker(fn"+(0<L.length?", ":"")+L+");\n";if(t)m+="runDestructors(destructors);\n";
else for(p=r?1:2;p<l.length;++p)n=1===p?"thisWired":"arg"+(p-2)+"Wired",null!==l[p].G&&(m+=n+"_dtor("+n+"); // "+l[p].name+"\n",F.push(n+"_dtor"),q.push(l[p].G));Ea&&(m+="var ret = retType.fromWireType(rv);\nreturn ret;\n");F.push(m+"}\n");l=Ba(F).apply(null,q);p=b-1;if(!e.hasOwnProperty(k))throw new va("Replacing nonexistant public symbol");void 0!==e[k].F&&void 0!==p?e[k].F[p]=l:(e[k]=l,e[k].I=p);return[]})},i:function(a,b,c,d,f){b=N(b);-1===f&&(f=4294967295);f=pa(c);var g=k=>k;if(0===d){var h=
32-8*c;g=k=>k<<h>>>h}c=b.includes("unsigned")?function(k,l){return l>>>0}:function(k,l){return l};S(a,{name:b,fromWireType:g,toWireType:c,argPackAdvance:8,readValueFromPointer:Pa(b,f,0!==d),G:null})},e:function(a,b,c){function d(g){g>>=2;var h=G;return new f(h.buffer,h[g+1],h[g])}var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=N(c);S(a,{name:c,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{J:!0})},o:function(a,b){b=N(b);var c="std::string"===
b;S(a,{name:b,fromWireType:function(d){var f=G[d>>2],g=d+4;if(c)for(var h=g,k=0;k<=f;++k){var l=g+k;if(k==f||0==A[l]){h=h?z(h,l-h):"";if(void 0===m)var m=h;else m+=String.fromCharCode(0),m+=h;h=l+1}}else{m=Array(f);for(k=0;k<f;++k)m[k]=String.fromCharCode(A[g+k]);m=m.join("")}X(d);return m},toWireType:function(d,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var g,h="string"==typeof f;h||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||R("Cannot pass non-string to std::string");
if(c&&h){var k=0;for(g=0;g<f.length;++g){var l=f.charCodeAt(g);127>=l?k++:2047>=l?k+=2:55296<=l&&57343>=l?(k+=4,++g):k+=3}g=k}else g=f.length;k=Za(4+g+1);l=k+4;G[k>>2]=g;if(c&&h){if(h=l,l=g+1,g=A,0<l){l=h+l-1;for(var m=0;m<f.length;++m){var q=f.charCodeAt(m);if(55296<=q&&57343>=q){var n=f.charCodeAt(++m);q=65536+((q&1023)<<10)|n&1023}if(127>=q){if(h>=l)break;g[h++]=q}else{if(2047>=q){if(h+1>=l)break;g[h++]=192|q>>6}else{if(65535>=q){if(h+2>=l)break;g[h++]=224|q>>12}else{if(h+3>=l)break;g[h++]=240|
q>>18;g[h++]=128|q>>12&63}g[h++]=128|q>>6&63}g[h++]=128|q&63}}g[h]=0}}else if(h)for(h=0;h<g;++h)m=f.charCodeAt(h),255<m&&(X(l),R("String has UTF-16 code units that do not fit in 8 bits")),A[l+h]=m;else for(h=0;h<g;++h)A[l+h]=f[h];null!==d&&d.push(X,k);return k},argPackAdvance:8,readValueFromPointer:za,G:function(d){X(d)}})},m:function(a,b,c){c=N(c);if(2===b){var d=Qa;var f=Ra;var g=Sa;var h=()=>D;var k=1}else 4===b&&(d=Ta,f=Ua,g=Va,h=()=>G,k=2);S(a,{name:c,fromWireType:function(l){for(var m=G[l>>
2],q=h(),n,r=l+4,t=0;t<=m;++t){var p=l+4+t*b;if(t==m||0==q[p>>k])r=d(r,p-r),void 0===n?n=r:(n+=String.fromCharCode(0),n+=r),r=p+b}X(l);return n},toWireType:function(l,m){"string"!=typeof m&&R("Cannot pass non-string to C++ string type "+c);var q=g(m),n=Za(4+q+b);G[n>>2]=q>>k;f(m,n+4,q+b);null!==l&&l.push(X,n);return n},argPackAdvance:8,readValueFromPointer:za,G:function(l){X(l)}})},v:function(a,b){b=N(b);S(a,{K:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},g:function(a,
b,c){a=U(a);b=Wa(b,"emval::as");var d=[],f=V(d);G[c>>2]=f;return b.toWireType(d,a)},w:function(a,b,c,d){a=U(a);for(var f=Array(b),g=0;g<b;++g)f[g]=Wa(G[c+4*g>>2],"parameter "+g);c=Array(b);for(g=0;g<b;++g){var h=f[g];c[g]=h.readValueFromPointer(d);d+=h.argPackAdvance}a=a.apply(void 0,c);return V(a)},b:ya,d:function(a,b){a=U(a);b=U(b);return V(a[b])},j:function(a){4<a&&(T[a].H+=1)},h:function(a){a=U(a);return"number"==typeof a},c:function(a){var b=Xa[a];return V(void 0===b?N(a):b)},f:function(a){var b=
U(a);Ca(b);ya(a)},l:function(a,b){a=Wa(a,"_emval_take_value");a=a.readValueFromPointer(b);return V(a)},n:function(){y("")},s:function(a,b,c){A.copyWithin(a,b,b+c)},r:function(){y("OOM")}};
(function(){function a(c){e.asm=c.exports;da=e.asm.x;c=da.buffer;e.HEAP8=B=new Int8Array(c);e.HEAP16=C=new Int16Array(c);e.HEAP32=E=new Int32Array(c);e.HEAPU8=A=new Uint8Array(c);e.HEAPU16=D=new Uint16Array(c);e.HEAPU32=G=new Uint32Array(c);e.HEAPF32=fa=new Float32Array(c);e.HEAPF64=ha=new Float64Array(c);ia=e.asm.B;ka.unshift(e.asm.y);H--;e.monitorRunDependencies&&e.monitorRunDependencies(H);0==H&&(null!==I&&(clearInterval(I),I=null),J&&(c=J,J=null,c()))}var b={a:$a};H++;e.monitorRunDependencies&&
e.monitorRunDependencies(H);if(e.instantiateWasm)try{return e.instantiateWasm(b,a)}catch(c){return w("Module.instantiateWasm callback failed with error: "+c),!1}(function(c){return oa().then(function(d){return WebAssembly.instantiate(d,b)}).then(function(d){return d}).then(c,function(d){w("failed to asynchronously prepare wasm: "+d);y(d)})})(function(c){a(c.instance)});return{}})();function Za(){return(Za=e.asm.z).apply(null,arguments)}function X(){return(X=e.asm.A).apply(null,arguments)}
var Na=e.___getTypeName=function(){return(Na=e.___getTypeName=e.asm.C).apply(null,arguments)};e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.D).apply(null,arguments)};e.dynCall_ijiii=function(){return(e.dynCall_ijiii=e.asm.E).apply(null,arguments)};var Z;J=function ab(){Z||bb();Z||(J=ab)};
function bb(){function a(){if(!Z&&(Z=!0,e.calledRun=!0,!ea)){M(ka);if(e.onRuntimeInitialized)e.onRuntimeInitialized();if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var b=e.postRun.shift();la.unshift(b)}M(la)}}if(!(0<H)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)ma();M(ja);0<H||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1);a()},1)):a())}}
if(e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();bb();
