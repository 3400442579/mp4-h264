var f;f||(f=typeof Module !== 'undefined' ? Module : {});f.file=f.file||function(a=256){let b=0,c=0,d=new Uint8Array(a);return{contents:function(){return d.slice(0,c)},seek:function(e){b=e},write:function(e){const g=e.byteLength;var k=b+g,h=d.length;h>=k||(k=Math.max(k,h*(1048576>h?2:1.125)>>>0),0!=h&&(k=Math.max(k,256)),h=d,d=new Uint8Array(k),0<c&&d.set(h.subarray(0,c),0));d.set(e,b);b+=g;c=Math.max(c,b);return g}}};f.create_buffer=function(a){return f._malloc(a)};f.free_buffer=function(a){return f._free(a)};
f.create=function(a={}){function b(){null!=h||m||(h=f.create_buffer(d*e*3/2));return h}function c(){null!=l||m||(l=f.create_buffer(d*e*g));return l}const d=a.width,e=a.height,g=a.stride||4;if(!d||!e)throw Error("width and height must be > 0");const k=f.file();let h=null,l=null,m=!1;a=Object.assign({},a);delete a.stride;const q=f.create_encoder(a,function(n,r,t){k.seek(t);n=f.HEAPU8.subarray(n,n+r);return k.write(n)!==n.byteLength});return{memory:function(){return f.HEAPU8},getYUVPointer:b,getRGBPointer:c,
end:function(){if(m)throw Error("Attempting to end() an encoder that is already finished");m=!0;f.finalize_encoder(q);null!=h&&f.free_buffer(h);null!=l&&f.free_buffer(l);return k.contents()},encodeRGBPointer:function(){const n=c(),r=b();f.encode_rgb(q,n,g,r)},encodeYUVPointer:function(){const n=b();f.encode_yuv(q,n)},encodeRGB:function(n){if(n.length!==d*e*g)throw Error("Expected buffer to be sized (width * height * "+g+")");const r=c(),t=b();f.HEAPU8.set(n,r);f.encode_rgb(q,r,g,t)},encodeYUV:function(n){if(n.length!==
d*e*3/2)throw Error("Expected buffer to be sized (width * height * 3) / 2");const r=b();f.HEAPU8.set(n,r);f.encode_yuv(q,r)}}};f.locateFile=function(a,b){f.simd&&(a=a.replace(/\.wasm$/i,".simd.wasm"));return f.getWasmPath?f.getWasmPath(a,b,f.simd):b+a};var aa=Object.assign({},f),ba="object"==typeof window,u="function"==typeof importScripts,v="",w;
if(ba||u)u?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",u&&(w=a=>{var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)});var x=f.printErr||console.warn.bind(console);Object.assign(f,aa);aa=null;var y;f.wasmBinary&&(y=f.wasmBinary);var noExitRuntime=f.noExitRuntime||!0;
"object"!=typeof WebAssembly&&z("no native wasm support detected");var ca,da=!1;function A(a,b){var c=B;b=a+b;for(var d="";!(a>=b);){var e=c[a++];if(!e)break;if(e&128){var g=c[a++]&63;if(192==(e&224))d+=String.fromCharCode((e&31)<<6|g);else{var k=c[a++]&63;e=224==(e&240)?(e&15)<<12|g<<6|k:(e&7)<<18|g<<12|k<<6|c[a++]&63;65536>e?d+=String.fromCharCode(e):(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023))}}else d+=String.fromCharCode(e)}return d}var C,B,D,E,F,G,ea,fa,ha,ia=[],ja=[],ka=[];
function la(){var a=f.preRun.shift();ia.unshift(a)}var I=0,J=null,K=null;function z(a){if(f.onAbort)f.onAbort(a);a="Aborted("+a+")";x(a);da=!0;throw new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.");}function ma(){return L.startsWith("data:application/octet-stream;base64,")}var L;L="mp4-encoder.wasm";if(!ma()){var na=L;L=f.locateFile?f.locateFile(na,v):v+na}
function oa(){var a=L;try{if(a==L&&y)return new Uint8Array(y);if(w)return w(a);throw"both async and sync fetching of the wasm failed";}catch(b){z(b)}}function pa(){return y||!ba&&!u||"function"!=typeof fetch?Promise.resolve().then(function(){return oa()}):fetch(L,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+L+"'";return a.arrayBuffer()}).catch(function(){return oa()})}function qa(a){for(;0<a.length;)a.shift()(f)}
function ra(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a);}}var sa=void 0;function N(a){for(var b="";B[a];)b+=sa[B[a++]];return b}var O={},P={},Q={};function ta(a){if(void 0===a)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var b=a.charCodeAt(0);return 48<=b&&57>=b?"_"+a:a}
function ua(a,b){a=ta(a);return(new Function("body","return function "+a+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n'))(b)}function va(a){var b=Error,c=ua(a,function(d){this.name=a;this.message=d;d=Error(d).stack;void 0!==d&&(this.stack=this.toString()+"\n"+d.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message};return c}
var wa=void 0;function R(a){throw new wa(a);}var xa=void 0;function ya(a,b){function c(h){h=b(h);if(h.length!==d.length)throw new xa("Mismatched type converter count");for(var l=0;l<d.length;++l)S(d[l],h[l])}var d=[];d.forEach(function(h){Q[h]=a});var e=Array(a.length),g=[],k=0;a.forEach((h,l)=>{P.hasOwnProperty(h)?e[l]=P[h]:(g.push(h),O.hasOwnProperty(h)||(O[h]=[]),O[h].push(()=>{e[l]=P[h];++k;k===g.length&&c(e)}))});0===g.length&&c(e)}
function S(a,b,c={}){if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var d=b.name;a||R('type "'+d+'" must have a positive integer typeid pointer');if(P.hasOwnProperty(a)){if(c.J)return;R("Cannot register type '"+d+"' twice")}P[a]=b;delete Q[a];O.hasOwnProperty(a)&&(b=O[a],delete O[a],b.forEach(e=>e()))}var za=[],T=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Aa(a){4<a&&0===--T[a].H&&(T[a]=void 0,za.push(a))}
var U=a=>{a||R("Cannot use deleted val. handle = "+a);return T[a].value},V=a=>{switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=za.length?za.pop():T.length;T[b]={H:1,value:a};return b}};function Ba(a){return this.fromWireType(F[a>>2])}function Ca(a,b){switch(b){case 2:return function(c){return this.fromWireType(ea[c>>2])};case 3:return function(c){return this.fromWireType(fa[c>>3])};default:throw new TypeError("Unknown float type: "+a);}}
function Da(a){var b=Function;if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var c=ua(b.name||"unknownFunctionName",function(){});c.prototype=b.prototype;c=new c;a=b.apply(c,a);return a instanceof Object?a:c}function Ea(a){for(;a.length;){var b=a.pop();a.pop()(b)}}
function Fa(a,b){var c=f;if(void 0===c[a].F){var d=c[a];c[a]=function(){c[a].F.hasOwnProperty(arguments.length)||R("Function '"+b+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+c[a].F+")!");return c[a].F[arguments.length].apply(this,arguments)};c[a].F=[];c[a].F[d.I]=d}}
function Ga(a,b,c){f.hasOwnProperty(a)?((void 0===c||void 0!==f[a].F&&void 0!==f[a].F[c])&&R("Cannot register public name '"+a+"' twice"),Fa(a,a),f.hasOwnProperty(c)&&R("Cannot register multiple overloads of a function with the same number of arguments ("+c+")!"),f[a].F[c]=b):(f[a]=b,void 0!==c&&(f[a].L=c))}function Ja(a,b){for(var c=[],d=0;d<a;d++)c.push(G[b+4*d>>2]);return c}var W=[];function Ka(a){var b=W[a];b||(a>=W.length&&(W.length=a+1),W[a]=b=ha.get(a));return b}
function La(a,b){var c=[];return function(){c.length=0;Object.assign(c,arguments);if(a.includes("j")){var d=f["dynCall_"+a];d=c&&c.length?d.apply(null,[b].concat(c)):d.call(null,b)}else d=Ka(b).apply(null,c);return d}}function Ma(a,b){a=N(a);var c=a.includes("j")?La(a,b):Ka(b);"function"!=typeof c&&R("unknown function pointer with signature "+a+": "+b);return c}var Na=void 0;function Oa(a){a=Pa(a);var b=N(a);X(a);return b}
function Qa(a,b){function c(g){e[g]||P[g]||(Q[g]?Q[g].forEach(c):(d.push(g),e[g]=!0))}var d=[],e={};b.forEach(c);throw new Na(a+": "+d.map(Oa).join([", "]));}function Ra(a,b,c){switch(b){case 0:return c?function(d){return C[d]}:function(d){return B[d]};case 1:return c?function(d){return D[d>>1]}:function(d){return E[d>>1]};case 2:return c?function(d){return F[d>>2]}:function(d){return G[d>>2]};default:throw new TypeError("Unknown integer type: "+a);}}
function Sa(a,b){for(var c="",d=0;!(d>=b/2);++d){var e=D[a+2*d>>1];if(0==e)break;c+=String.fromCharCode(e)}return c}function Ta(a,b,c){void 0===c&&(c=2147483647);if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var e=0;e<c;++e)D[b>>1]=a.charCodeAt(e),b+=2;D[b>>1]=0;return b-d}function Ua(a){return 2*a.length}
function Va(a,b){for(var c=0,d="";!(c>=b/4);){var e=F[a+4*c>>2];if(0==e)break;++c;65536<=e?(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023)):d+=String.fromCharCode(e)}return d}function Wa(a,b,c){void 0===c&&(c=2147483647);if(4>c)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var g=a.charCodeAt(e);if(55296<=g&&57343>=g){var k=a.charCodeAt(++e);g=65536+((g&1023)<<10)|k&1023}F[b>>2]=g;b+=4;if(b+4>c)break}F[b>>2]=0;return b-d}
function Xa(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&++c;b+=4}return b}function Ya(a,b){var c=P[a];void 0===c&&R(b+" has unknown type "+Oa(a));return c}for(var Za={},$a=Array(256),Y=0;256>Y;++Y)$a[Y]=String.fromCharCode(Y);sa=$a;wa=f.BindingError=va("BindingError");xa=f.InternalError=va("InternalError");f.count_emval_handles=function(){for(var a=0,b=5;b<T.length;++b)void 0!==T[b]&&++a;return a};
f.get_first_emval=function(){for(var a=5;a<T.length;++a)if(void 0!==T[a])return T[a];return null};Na=f.UnboundTypeError=va("UnboundTypeError");
var bb={a:function(a,b,c,d){z("Assertion failed: "+(a?A(a):"")+", at: "+[b?b?A(b):"":"unknown filename",c,d?d?A(d):"":"unknown function"])},q:function(){},u:function(a,b,c,d,e){var g=ra(c);b=N(b);S(a,{name:b,fromWireType:function(k){return!!k},toWireType:function(k,h){return h?d:e},argPackAdvance:8,readValueFromPointer:function(k){if(1===c)var h=C;else if(2===c)h=D;else if(4===c)h=F;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(h[k>>g])},G:null})},t:function(a,
b){b=N(b);S(a,{name:b,fromWireType:function(c){var d=U(c);Aa(c);return d},toWireType:function(c,d){return V(d)},argPackAdvance:8,readValueFromPointer:Ba,G:null})},p:function(a,b,c){c=ra(c);b=N(b);S(a,{name:b,fromWireType:function(d){return d},toWireType:function(d,e){return e},argPackAdvance:8,readValueFromPointer:Ca(b,c),G:null})},k:function(a,b,c,d,e,g){var k=Ja(b,c);a=N(a);e=Ma(d,e);Ga(a,function(){Qa("Cannot call "+a+" due to unbound types",k)},b-1);ya(k,function(h){var l=a,m=a;h=[h[0],null].concat(h.slice(1));
var q=e,n=h.length;2>n&&R("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var r=null!==h[1]&&!1,t=!1,p=1;p<h.length;++p)if(null!==h[p]&&void 0===h[p].G){t=!0;break}var Ha="void"!==h[0].name,H="",M="";for(p=0;p<n-2;++p)H+=(0!==p?", ":"")+"arg"+p,M+=(0!==p?", ":"")+"arg"+p+"Wired";m="return function "+ta(m)+"("+H+") {\nif (arguments.length !== "+(n-2)+") {\nthrowBindingError('function "+m+" called with ' + arguments.length + ' arguments, expected "+(n-2)+" args!');\n}\n";
t&&(m+="var destructors = [];\n");var Ia=t?"destructors":"null";H="throwBindingError invoker fn runDestructors retType classParam".split(" ");q=[R,q,g,Ea,h[0],h[1]];r&&(m+="var thisWired = classParam.toWireType("+Ia+", this);\n");for(p=0;p<n-2;++p)m+="var arg"+p+"Wired = argType"+p+".toWireType("+Ia+", arg"+p+"); // "+h[p+2].name+"\n",H.push("argType"+p),q.push(h[p+2]);r&&(M="thisWired"+(0<M.length?", ":"")+M);m+=(Ha?"var rv = ":"")+"invoker(fn"+(0<M.length?", ":"")+M+");\n";if(t)m+="runDestructors(destructors);\n";
else for(p=r?1:2;p<h.length;++p)n=1===p?"thisWired":"arg"+(p-2)+"Wired",null!==h[p].G&&(m+=n+"_dtor("+n+"); // "+h[p].name+"\n",H.push(n+"_dtor"),q.push(h[p].G));Ha&&(m+="var ret = retType.fromWireType(rv);\nreturn ret;\n");H.push(m+"}\n");h=Da(H).apply(null,q);p=b-1;if(!f.hasOwnProperty(l))throw new xa("Replacing nonexistant public symbol");void 0!==f[l].F&&void 0!==p?f[l].F[p]=h:(f[l]=h,f[l].I=p);return[]})},i:function(a,b,c,d,e){b=N(b);-1===e&&(e=4294967295);e=ra(c);var g=h=>h;if(0===d){var k=
32-8*c;g=h=>h<<k>>>k}c=b.includes("unsigned")?function(h,l){return l>>>0}:function(h,l){return l};S(a,{name:b,fromWireType:g,toWireType:c,argPackAdvance:8,readValueFromPointer:Ra(b,e,0!==d),G:null})},e:function(a,b,c){function d(g){g>>=2;var k=G;return new e(k.buffer,k[g+1],k[g])}var e=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=N(c);S(a,{name:c,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{J:!0})},o:function(a,b){b=N(b);var c="std::string"===
b;S(a,{name:b,fromWireType:function(d){var e=G[d>>2],g=d+4;if(c)for(var k=g,h=0;h<=e;++h){var l=g+h;if(h==e||0==B[l]){k=k?A(k,l-k):"";if(void 0===m)var m=k;else m+=String.fromCharCode(0),m+=k;k=l+1}}else{m=Array(e);for(h=0;h<e;++h)m[h]=String.fromCharCode(B[g+h]);m=m.join("")}X(d);return m},toWireType:function(d,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var g,k="string"==typeof e;k||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||R("Cannot pass non-string to std::string");
if(c&&k){var h=0;for(g=0;g<e.length;++g){var l=e.charCodeAt(g);127>=l?h++:2047>=l?h+=2:55296<=l&&57343>=l?(h+=4,++g):h+=3}g=h}else g=e.length;h=ab(4+g+1);l=h+4;G[h>>2]=g;if(c&&k){if(k=l,l=g+1,g=B,0<l){l=k+l-1;for(var m=0;m<e.length;++m){var q=e.charCodeAt(m);if(55296<=q&&57343>=q){var n=e.charCodeAt(++m);q=65536+((q&1023)<<10)|n&1023}if(127>=q){if(k>=l)break;g[k++]=q}else{if(2047>=q){if(k+1>=l)break;g[k++]=192|q>>6}else{if(65535>=q){if(k+2>=l)break;g[k++]=224|q>>12}else{if(k+3>=l)break;g[k++]=240|
q>>18;g[k++]=128|q>>12&63}g[k++]=128|q>>6&63}g[k++]=128|q&63}}g[k]=0}}else if(k)for(k=0;k<g;++k)m=e.charCodeAt(k),255<m&&(X(l),R("String has UTF-16 code units that do not fit in 8 bits")),B[l+k]=m;else for(k=0;k<g;++k)B[l+k]=e[k];null!==d&&d.push(X,h);return h},argPackAdvance:8,readValueFromPointer:Ba,G:function(d){X(d)}})},m:function(a,b,c){c=N(c);if(2===b){var d=Sa;var e=Ta;var g=Ua;var k=()=>E;var h=1}else 4===b&&(d=Va,e=Wa,g=Xa,k=()=>G,h=2);S(a,{name:c,fromWireType:function(l){for(var m=G[l>>
2],q=k(),n,r=l+4,t=0;t<=m;++t){var p=l+4+t*b;if(t==m||0==q[p>>h])r=d(r,p-r),void 0===n?n=r:(n+=String.fromCharCode(0),n+=r),r=p+b}X(l);return n},toWireType:function(l,m){"string"!=typeof m&&R("Cannot pass non-string to C++ string type "+c);var q=g(m),n=ab(4+q+b);G[n>>2]=q>>h;e(m,n+4,q+b);null!==l&&l.push(X,n);return n},argPackAdvance:8,readValueFromPointer:Ba,G:function(l){X(l)}})},v:function(a,b){b=N(b);S(a,{K:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},g:function(a,
b,c){a=U(a);b=Ya(b,"emval::as");var d=[],e=V(d);G[c>>2]=e;return b.toWireType(d,a)},w:function(a,b,c,d){a=U(a);for(var e=Array(b),g=0;g<b;++g)e[g]=Ya(G[c+4*g>>2],"parameter "+g);c=Array(b);for(g=0;g<b;++g){var k=e[g];c[g]=k.readValueFromPointer(d);d+=k.argPackAdvance}a=a.apply(void 0,c);return V(a)},b:Aa,d:function(a,b){a=U(a);b=U(b);return V(a[b])},j:function(a){4<a&&(T[a].H+=1)},h:function(a){a=U(a);return"number"==typeof a},c:function(a){var b=Za[a];return V(void 0===b?N(a):b)},f:function(a){var b=
U(a);Ea(b);Aa(a)},l:function(a,b){a=Ya(a,"_emval_take_value");a=a.readValueFromPointer(b);return V(a)},n:function(){z("")},s:function(a,b,c){B.copyWithin(a,b,b+c)},r:function(){z("OOM")}};
(function(){function a(e){f.asm=e.exports;ca=f.asm.x;e=ca.buffer;f.HEAP8=C=new Int8Array(e);f.HEAP16=D=new Int16Array(e);f.HEAP32=F=new Int32Array(e);f.HEAPU8=B=new Uint8Array(e);f.HEAPU16=E=new Uint16Array(e);f.HEAPU32=G=new Uint32Array(e);f.HEAPF32=ea=new Float32Array(e);f.HEAPF64=fa=new Float64Array(e);ha=f.asm.B;ja.unshift(f.asm.y);I--;f.monitorRunDependencies&&f.monitorRunDependencies(I);0==I&&(null!==J&&(clearInterval(J),J=null),K&&(e=K,K=null,e()))}function b(e){a(e.instance)}function c(e){return pa().then(function(g){return WebAssembly.instantiate(g,
d)}).then(function(g){return g}).then(e,function(g){x("failed to asynchronously prepare wasm: "+g);z(g)})}var d={a:bb};I++;f.monitorRunDependencies&&f.monitorRunDependencies(I);if(f.instantiateWasm)try{return f.instantiateWasm(d,a)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(function(){return y||"function"!=typeof WebAssembly.instantiateStreaming||ma()||"function"!=typeof fetch?c(b):fetch(L,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,
d).then(b,function(g){x("wasm streaming compile failed: "+g);x("falling back to ArrayBuffer instantiation");return c(b)})})})();return{}})();var ab=f._malloc=function(){return(ab=f._malloc=f.asm.z).apply(null,arguments)},X=f._free=function(){return(X=f._free=f.asm.A).apply(null,arguments)},Pa=f.___getTypeName=function(){return(Pa=f.___getTypeName=f.asm.C).apply(null,arguments)};f.__embind_initialize_bindings=function(){return(f.__embind_initialize_bindings=f.asm.D).apply(null,arguments)};
f.dynCall_ijiii=function(){return(f.dynCall_ijiii=f.asm.E).apply(null,arguments)};var Z;K=function cb(){Z||db();Z||(K=cb)};
function db(){function a(){if(!Z&&(Z=!0,f.calledRun=!0,!da)){qa(ja);if(f.onRuntimeInitialized)f.onRuntimeInitialized();if(f.postRun)for("function"==typeof f.postRun&&(f.postRun=[f.postRun]);f.postRun.length;){var b=f.postRun.shift();ka.unshift(b)}qa(ka)}}if(!(0<I)){if(f.preRun)for("function"==typeof f.preRun&&(f.preRun=[f.preRun]);f.preRun.length;)la();qa(ia);0<I||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1);a()},1)):a())}}
if(f.preInit)for("function"==typeof f.preInit&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();db();
